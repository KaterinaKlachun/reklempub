{"version":3,"file":"js/403.ff346fa6.js","mappings":"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","sources":["webpack://reklamepub/./src/views/ProductPage.vue","webpack://reklamepub/./src/views/ProductPage.vue?b132"],"sourcesContent":["<template>\r\n  <!-- Информация о странице -->\r\n  <section class=\"info\">\r\n    <div class=\"pagination\">\r\n      <router-link to=\"/\">Главная / </router-link>\r\n      <router-link to=\"/catalog\">Каталог /</router-link>\r\n    </div>\r\n  </section>\r\n\r\n  <!-- Информация о продукте -->\r\n  <section v-if=\"product\" class=\"wrapper\">\r\n    <div class=\"product\">\r\n      <div class=\"product_left\">\r\n        <!-- Ленивая загрузка изображения продукта -->\r\n        <img \r\n          :src=\"selectedColorImage\" \r\n          :alt=\"product.name\" \r\n          class=\"product-image\" \r\n          loading=\"lazy\" \r\n        />\r\n      </div>\r\n      <div class=\"product_right\">\r\n        <p>{{ product.name }}</p>\r\n        <div class=\"stock_info\">\r\n          <p id=\"art\">Арт. {{ product.article }}</p>\r\n          <p>На складе {{ product.stock }} шт.</p>\r\n        </div>\r\n        <div class=\"custom-select\">\r\n          <div class=\"options\">\r\n            <p>Цвет</p>\r\n            <select @change=\"updateColorImage($event.target.value)\">\r\n              <option \r\n                v-for=\"color in product.product_colors\" \r\n                :key=\"color.color\" \r\n                :value=\"color.color\"\r\n              >\r\n                {{ color.color }}\r\n              </option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n        <p id=\"product-price\" class=\"product-price\">{{ product.price }} ₽</p>\r\n        <div class=\"add-to-cart-container\">\r\n          <button \r\n            class=\"add-to-cart-button\" \r\n            @click=\"addToCart\" \r\n            aria-label=\"Добавить в корзину\"\r\n          >\r\n            В корзину\r\n          </button>\r\n          <div class=\"quantity-counter\">\r\n            <!-- Ленивая загрузка иконок -->\r\n            <button \r\n              @click=\"selectedQuantity = Math.max(1, selectedQuantity - 1)\" \r\n              class=\"decrement-button\" \r\n              aria-label=\"Уменьшить количество\"\r\n            >\r\n              <img \r\n                src=\"@/assets/img/product/minus.svg\" \r\n                alt=\"Уменьшить количество\" \r\n                loading=\"lazy\" \r\n              />\r\n            </button>\r\n            <span>{{ selectedQuantity }}</span>\r\n            <button \r\n              @click=\"selectedQuantity++\" \r\n              class=\"increment-button\" \r\n              aria-label=\"Увеличить количество\"\r\n            >\r\n              <img \r\n                src=\"@/assets/img/product/plus.svg\" \r\n                alt=\"Увеличить количество\" \r\n                loading=\"lazy\" \r\n              />\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"product_info\">\r\n      <h1>Описание</h1>\r\n      <p>{{ product.description }}</p>\r\n    </div>\r\n  </section>\r\n\r\n  <section v-else>\r\n    <p>Загрузка данных о продукте...</p>\r\n  </section>\r\n</template>\r\n\r\n<script>\r\nimport supabase from \"@/supabase\"; // Подключение к Supabase\r\n\r\nexport default {\r\n  name: \"ProductPage\",\r\n  props: [\"category\", \"id\"], // Категория и ID продукта передаются через роутер\r\n  data() {\r\n    return {\r\n      product: null, // Данные о продукте\r\n      selectedColorImage: null, // Изображение выбранного цвета\r\n      selectedQuantity: 1, // Количество товара\r\n    };\r\n  },\r\n  methods: {\r\n    async loadProduct() {\r\n      try {\r\n        const { data, error } = await supabase\r\n          .from(\"products\")\r\n          .select(\"*, product_colors(color, image_url)\") // Получаем цвета и их изображения\r\n          .eq(\"id\", this.id)\r\n          .single();\r\n\r\n        if (error) {\r\n          console.error(\"Ошибка загрузки продукта:\", error);\r\n          return;\r\n        }\r\n\r\n        this.product = data;\r\n\r\n        // Если product_colors существует и не пусто, устанавливаем первое изображение\r\n        if (this.product.product_colors && this.product.product_colors.length > 0) {\r\n          this.selectedColorImage = this.product.product_colors[0].image_url;\r\n        } else {\r\n          this.selectedColorImage = null;\r\n        }\r\n      } catch (err) {\r\n        console.error(\"Ошибка при загрузке продукта:\", err);\r\n      }\r\n    },\r\n    updateColorImage(selectedColor) {\r\n      const selectedColorData = this.product.product_colors?.find(\r\n        (color) => color.color === selectedColor\r\n      );\r\n\r\n      if (selectedColorData) {\r\n        this.selectedColorImage = selectedColorData.image_url;\r\n      } else {\r\n        this.selectedColorImage = null;\r\n      }\r\n    },\r\n    addToCart() {\r\n      console.log(\r\n        `Добавлено в корзину: ${this.selectedQuantity} шт. товара \"${this.product.name}\"`\r\n      );\r\n    },\r\n  },\r\n  created() {\r\n    this.loadProduct();\r\n  },\r\n  watch: {\r\n    \"$route.params.id\": \"loadProduct\",\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n  .product {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    justify-content: space-between;\r\n    margin-top: 10%;\r\n  }\r\n\r\n  .product_left img {\r\n    width: 100%;\r\n    max-width: 450px;\r\n  }\r\n\r\n  .product_right {\r\n    width: 100%;\r\n    max-width: 50%;\r\n    padding-left: 2%;\r\n  }\r\n\r\n  .product_right p {\r\n    font-family: medium;\r\n    font-size: 1.5rem;\r\n  }\r\n\r\n  .stock_info {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    margin-top: 5%;\r\n  }\r\n\r\n  .stock_info p {\r\n    font-family: medium;\r\n    font-size: 0.75rem;\r\n    color: #FFA630;\r\n  }\r\n\r\n  #art {\r\n    color: #10BB87;\r\n  }\r\n\r\n  .options {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    padding: 10px;\r\n    align-items: center;\r\n    margin-top: 5%;\r\n  }\r\n\r\n  .options p {\r\n    font-family: medium;\r\n    font-size: 0.85rem;\r\n  }\r\n\r\n  .options select {\r\n    background-color: #FAFAFA;\r\n    border: 1px solid #F2F2F2;\r\n    border-radius: 4px;\r\n    width: 70%;\r\n    height: 40px;\r\n  }\r\n\r\n  .product-price {\r\n    margin-top: 5%;\r\n    width: 275px;\r\n    height: 70px;\r\n    background-image: url(\"@/assets/img/product/back.svg\");\r\n    background-size: cover;\r\n    background-position: center;\r\n    background-repeat: no-repeat;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    text-align: center;\r\n    color: white;\r\n    font-family: medium;\r\n  }\r\n\r\n  .add-to-cart-container {\r\n    display: flex;\r\n    margin-top: 10%;\r\n    justify-content: space-between;\r\n  }\r\n\r\n  .add-to-cart-button {\r\n    width: 300px;\r\n    background-color: white;\r\n    border: none;\r\n    border-radius: 10px;\r\n    box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);\r\n  }\r\n\r\n  .quantity-counter {\r\n    display: flex;\r\n    align-items: center;\r\n    width: 30%;\r\n  }\r\n\r\n  .decrement-button,\r\n  .increment-button {\r\n    background-color: white;\r\n    border: none;\r\n    padding: 5px;\r\n  }\r\n\r\n  .quantity-counter span {\r\n    margin: 0 10px;\r\n    font-size: 16px;\r\n    color: #00A860;\r\n  }\r\n\r\n  .product_info {\r\n    margin-top: 10%;\r\n  }\r\n\r\n  .product_info h1 {\r\n    color: #10BB87;\r\n    font-family: medium;\r\n    font-size: 1.5rem;\r\n    margin-bottom: 5%;\r\n  }\r\n\r\n  .product_info p {\r\n    font-family: regular;\r\n    font-size: 0.875rem;\r\n  }\r\n\r\n  @media screen and (max-width: 768px) {\r\n    .product {\r\n      flex-direction: column;\r\n      align-items: center;\r\n    }\r\n\r\n    .product_left,\r\n    .product_right {\r\n      width: 100%;\r\n      padding-left: 0;\r\n    }\r\n\r\n    .add-to-cart-container {\r\n      flex-direction: column;\r\n      align-items: center;\r\n    }\r\n  }\r\n</style>\r\n","import { render } from \"./ProductPage.vue?vue&type=template&id=18d3c7fe&scoped=true\"\nimport script from \"./ProductPage.vue?vue&type=script&lang=js\"\nexport * from \"./ProductPage.vue?vue&type=script&lang=js\"\n\nimport \"./ProductPage.vue?vue&type=style&index=0&id=18d3c7fe&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-18d3c7fe\"]])\n\nexport default __exports__"],"names":["class","key","id","_createElementBlock","_Fragment","_createElementVNode","_hoisted_1","_hoisted_2","_createVNode","_component_router_link","to","default","_withCtx","_cache","_createTextVNode","_","$data","product","_hoisted_3","_hoisted_4","_hoisted_5","src","selectedColorImage","alt","name","loading","_hoisted_6","_hoisted_7","_toDisplayString","_hoisted_8","_hoisted_9","article","stock","_hoisted_10","_hoisted_11","onChange","$event","$options","updateColorImage","target","value","_renderList","product_colors","color","_hoisted_12","_hoisted_13","price","_hoisted_14","onClick","args","addToCart","_hoisted_15","selectedQuantity","Math","max","_imports_0","_imports_1","_hoisted_16","description","_hoisted_17","props","data","methods","loadProduct","error","supabase","from","select","eq","this","single","console","length","image_url","err","selectedColor","selectedColorData","find","log","created","watch","__exports__","render"],"sourceRoot":""}