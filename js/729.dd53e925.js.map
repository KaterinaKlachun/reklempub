{"version":3,"file":"js/729.dd53e925.js","mappings":"6PAEOA,MAAM,Q,GACJA,MAAM,c,GAHfC,IAAA,EAUsBD,MAAM,W,GACnBA,MAAM,W,GACJA,MAAM,gB,EAZjB,c,GAeWA,MAAM,iB,GAEJA,MAAM,c,GACNE,GAAG,O,GAGHF,MAAM,iB,GACJA,MAAM,W,EAtBrB,U,GA+BWE,GAAG,gBAAgBF,MAAM,iB,GACvBA,MAAM,yB,GAEJA,MAAM,oB,GAYZA,MAAM,gB,GA9CfC,IAAA,G,0EAAAE,EAAAA,EAAAA,IAAAC,EAAAA,GAAA,OAEEC,EAAAA,EAAAA,IAKM,MALNC,EAKM,EAJJD,EAAAA,EAAAA,IAGM,MAHNE,EAGM,EAFJC,EAAAA,EAAAA,IAA4CC,EAAA,CAA/BC,GAAG,KAAG,CAJzBC,SAAAC,EAAAA,EAAAA,KAI0B,IAAUC,EAAA,KAAAA,EAAA,KAJpCC,EAAAA,EAAAA,IAI0B,kBAJ1BC,EAAA,KAKMP,EAAAA,EAAAA,IAAkDC,EAAA,CAArCC,GAAG,YAAU,CALhCC,SAAAC,EAAAA,EAAAA,KAKiC,IAASC,EAAA,KAAAA,EAAA,KAL1CC,EAAAA,EAAAA,IAKiC,iBALjCC,EAAA,QAUaC,EAAAC,UAAO,WAAlBd,EAAAA,EAAAA,IAwCM,MAxCNe,EAwCM,EAvCJb,EAAAA,EAAAA,IAkCM,MAlCNc,EAkCM,EAjCJd,EAAAA,EAAAA,IAEM,MAFNe,EAEM,EADJf,EAAAA,EAAAA,IAA2E,OAArEgB,IAAKL,EAAAM,mBAAqBC,IAAKP,EAAAC,QAAQO,KAAMxB,MAAM,iB,OAbjEyB,MAeMpB,EAAAA,EAAAA,IA6BM,MA7BNqB,EA6BM,EA5BJrB,EAAAA,EAAAA,IAAyB,UAAAsB,EAAAA,EAAAA,IAAnBX,EAAAC,QAAQO,MAAI,IAClBnB,EAAAA,EAAAA,IAGM,MAHNuB,EAGM,EAFJvB,EAAAA,EAAAA,IAA0C,IAA1CwB,EAAY,SAAKF,EAAAA,EAAAA,IAAGX,EAAAC,QAAQa,SAAO,IACnCzB,EAAAA,EAAAA,IAAwC,SAArC,cAAUsB,EAAAA,EAAAA,IAAGX,EAAAC,QAAQc,OAAQ,OAAI,MAEtC1B,EAAAA,EAAAA,IASM,MATN2B,EASM,EARJ3B,EAAAA,EAAAA,IAOM,MAPN4B,EAOM,cANJ5B,EAAAA,EAAAA,IAAW,SAAR,QAAI,KACPA,EAAAA,EAAAA,IAIS,UAJA6B,SAAMrB,EAAA,KAAAA,EAAA,GAAAsB,GAAEC,EAAAC,iBAAiBF,EAAOG,OAAOC,S,gBAC9CpC,EAAAA,EAAAA,IAESC,EAAAA,GAAA,MA3BvBoC,EAAAA,EAAAA,IAyBsCxB,EAAAC,QAAQwB,gBAAjBC,K,WAAfvC,EAAAA,EAAAA,IAES,UAFwCF,IAAKyC,EAAMA,MAAQH,MAAOG,EAAMA,Q,QAC5EA,EAAMA,OAAK,EA1B9BC,M,gBA+BQtC,EAAAA,EAAAA,IAAqE,IAArEuC,GAAqEjB,EAAAA,EAAAA,IAAtBX,EAAAC,QAAQ4B,OAAQ,KAAE,IACjExC,EAAAA,EAAAA,IAWM,MAXNyC,EAWM,EAVJzC,EAAAA,EAAAA,IAAwE,UAAhEL,MAAM,qBAAsB+C,QAAKlC,EAAA,KAAAA,EAAA,OAAAmC,IAAEZ,EAAAa,WAAAb,EAAAa,aAAAD,KAAW,cACtD3C,EAAAA,EAAAA,IAQM,MARN6C,EAQM,EAPJ7C,EAAAA,EAAAA,IAES,UAFA0C,QAAKlC,EAAA,KAAAA,EAAA,GAAAsB,GAAEnB,EAAAmC,iBAAmBC,KAAKC,IAAI,EAAGrC,EAAAmC,iBAAmB,IAAInD,MAAM,oB,cAC1EK,EAAAA,EAAAA,IAAuE,OAAlEgB,IAAAiC,EAAqC/B,IAAI,wB,aAEhDlB,EAAAA,EAAAA,IAAmC,aAAAsB,EAAAA,EAAAA,IAA1BX,EAAAmC,kBAAgB,IACzB9C,EAAAA,EAAAA,IAES,UAFA0C,QAAKlC,EAAA,KAAAA,EAAA,GAAAsB,GAAEnB,EAAAmC,oBAAoBnD,MAAM,oB,cACxCK,EAAAA,EAAAA,IAAsE,OAAjEgB,IAAAkC,EAAoChC,IAAI,wB,qBAMvDlB,EAAAA,EAAAA,IAGM,MAHNmD,EAGM,cAFJnD,EAAAA,EAAAA,IAAiB,UAAb,YAAQ,KACZA,EAAAA,EAAAA,IAAgC,UAAAsB,EAAAA,EAAAA,IAA1BX,EAAAC,QAAQwC,aAAW,qBAG7BtD,EAAAA,EAAAA,IAEM,MArDRuD,EAAA7C,EAAA,MAAAA,EAAA,MAoDIR,EAAAA,EAAAA,IAAoC,SAAjC,iCAA6B,W,+BAOpC,GACEmB,KAAM,cACNmC,MAAO,CAAC,WAAY,MACpBC,IAAAA,GACE,MAAO,CACL3C,QAAS,KACTK,mBAAoB,KACpB6B,iBAAkB,EAEtB,EACAU,QAAS,CAEP,iBAAMC,GACJ,IACE,MAAM,KAAEF,EAAI,MAAEG,SAAgBC,EAAAA,EAC3BC,KAAK,YACLC,OAAO,uCACPC,GAAG,KAAMC,KAAKlE,IACdmE,SAEH,GAAIN,EAEF,YADAO,QAAQP,MAAM,4BAA6BA,GAI7CK,KAAKnD,QAAU2C,EAGXQ,KAAKnD,QAAQwB,gBAAkB2B,KAAKnD,QAAQwB,eAAe8B,OAAS,EACtEH,KAAK9C,mBAAqB8C,KAAKnD,QAAQwB,eAAe,GAAG+B,UAEzDJ,KAAK9C,mBAAqB,IAE9B,CAAE,MAAOmD,GACPH,QAAQP,MAAM,gCAAiCU,EACjD,CACF,EAGApC,gBAAAA,CAAiBqC,GAEf,MAAMC,EAAoBP,KAAKnD,QAAQwB,gBAAgBmC,MAAKlC,GAASA,EAAMA,QAAUgC,IAGnFN,KAAK9C,mBADHqD,EACwBA,EAAkBH,UAElB,IAE9B,EAGAvB,SAAAA,GACEqB,QAAQO,IACN,wBAAwBT,KAAKjB,gCAAgCiB,KAAKnD,QAAQO,QAE9E,GAEFsD,OAAAA,GACEV,KAAKN,aACP,EACAiB,MAAO,CACL,mBAAoB,gB,UCjHxB,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://reklamepub/./src/views/ProductPage.vue","webpack://reklamepub/./src/views/ProductPage.vue?b132"],"sourcesContent":["<template>\r\n  <!-- Информация о странице -->\r\n  <div class=\"info\">\r\n    <div class=\"pagination\">\r\n      <router-link to=\"/\">Главная / </router-link>\r\n      <router-link to=\"/catalog\">Каталог /</router-link>\r\n    </div>\r\n  </div>\r\n\r\n  <!-- Информация о продукте -->\r\n  <div v-if=\"product\" class=\"wrapper\">\r\n    <div class=\"product\">\r\n      <div class=\"product_left\">\r\n        <img :src=\"selectedColorImage\" :alt=\"product.name\" class=\"product-image\" />\r\n      </div>\r\n      <div class=\"product_right\">\r\n        <p>{{ product.name }}</p>\r\n        <div class=\"stock_info\">\r\n          <p id=\"art\">Арт. {{ product.article }}</p>\r\n          <p>На складе {{ product.stock }} шт.</p>\r\n        </div>\r\n        <div class=\"custom-select\">\r\n          <div class=\"options\">\r\n            <p>Цвет</p>\r\n            <select @change=\"updateColorImage($event.target.value)\">\r\n              <option v-for=\"color in product.product_colors\" :key=\"color.color\" :value=\"color.color\">\r\n                {{ color.color }}\r\n              </option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n        <p id=\"product-price\" class=\"product-price\">{{ product.price }} ₽</p>\r\n        <div class=\"add-to-cart-container\">\r\n          <button class=\"add-to-cart-button\" @click=\"addToCart\">В корзину</button>\r\n          <div class=\"quantity-counter\">\r\n            <button @click=\"selectedQuantity = Math.max(1, selectedQuantity - 1)\" class=\"decrement-button\">\r\n              <img src=\"@/assets/img/product/minus.svg\" alt=\"Уменьшить количество\" />\r\n            </button>\r\n            <span>{{ selectedQuantity }}</span>\r\n            <button @click=\"selectedQuantity++\" class=\"increment-button\">\r\n              <img src=\"@/assets/img/product/plus.svg\" alt=\"Увеличить количество\" />\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"product_info\">\r\n      <h1>Описание</h1>\r\n      <p>{{ product.description }}</p>\r\n    </div>\r\n  </div>\r\n  <div v-else>\r\n    <p>Загрузка данных о продукте...</p>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport supabase from \"@/supabase\"; // Подключение к Supabase\r\n\r\nexport default {\r\n  name: \"ProductPage\",\r\n  props: [\"category\", \"id\"], // Категория и ID продукта передаются через роутер\r\n  data() {\r\n    return {\r\n      product: null, // Данные о продукте\r\n      selectedColorImage: null, // Изображение выбранного цвета\r\n      selectedQuantity: 1, // Количество товара\r\n    };\r\n  },\r\n  methods: {\r\n    // Загрузка данных о конкретном продукте\r\n    async loadProduct() {\r\n      try {\r\n        const { data, error } = await supabase\r\n          .from(\"products\")\r\n          .select(\"*, product_colors(color, image_url)\") // Получаем цвета и их изображения\r\n          .eq(\"id\", this.id)  // Фильтруем по ID продукта\r\n          .single();  // Ожидаем один продукт\r\n\r\n        if (error) {\r\n          console.error(\"Ошибка загрузки продукта:\", error);\r\n          return;\r\n        }\r\n\r\n        this.product = data;\r\n\r\n        // Если product_colors существует и не пусто, устанавливаем первое изображение\r\n        if (this.product.product_colors && this.product.product_colors.length > 0) {\r\n          this.selectedColorImage = this.product.product_colors[0].image_url;\r\n        } else {\r\n          this.selectedColorImage = null;  // Если цветов нет, не показываем изображение\r\n        }\r\n      } catch (err) {\r\n        console.error(\"Ошибка при загрузке продукта:\", err);\r\n      }\r\n    },\r\n\r\n    // Обновление изображения при смене цвета\r\n    updateColorImage(selectedColor) {\r\n      // Убедитесь, что product_colors существует и что выбранный цвет есть в этом списке\r\n      const selectedColorData = this.product.product_colors?.find(color => color.color === selectedColor);\r\n\r\n      if (selectedColorData) {\r\n        this.selectedColorImage = selectedColorData.image_url; // Устанавливаем изображение выбранного цвета\r\n      } else {\r\n        this.selectedColorImage = null; // Если цвет не найден, устанавливаем пустое изображение\r\n      }\r\n    },\r\n\r\n    // Добавление товара в корзину\r\n    addToCart() {\r\n      console.log(\r\n        `Добавлено в корзину: ${this.selectedQuantity} шт. товара \"${this.product.name}\"`\r\n      );\r\n    },\r\n  },\r\n  created() {\r\n    this.loadProduct(); // Загрузка продукта при создании компонента\r\n  },\r\n  watch: {\r\n    \"$route.params.id\": \"loadProduct\", // Обновление данных, если изменится ID в маршруте\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n  .product {\r\n    display: flex;\r\n    margin-top: 10%;\r\n    justify-content: space-between;\r\n  }\r\n\r\n  .product_left img {\r\n    width: 450px;\r\n  }\r\n\r\n  .product_right {\r\n    width: 50%;\r\n  }\r\n\r\n  .product_right p {\r\n    font-family: medium;\r\n    font-size: 1.5rem;\r\n  }\r\n\r\n  .stock_info {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    margin-top: 5%;\r\n  }\r\n\r\n  .stock_info p {\r\n    font-family: medium;\r\n    font-size: 0.75rem;\r\n    color: #FFA630;\r\n  }\r\n\r\n  #art {\r\n    color: #10BB87;\r\n  }\r\n\r\n  .options {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    padding: 10px;\r\n    align-items: center;\r\n    margin-top: 5%;\r\n  }\r\n\r\n  .options p {\r\n    font-family: medium;\r\n    font-size: 0.85rem;\r\n  }\r\n\r\n  .options select {\r\n    background-color: #FAFAFA;\r\n    border: 1px solid #F2F2F2;\r\n    border-radius: 4px;\r\n    width: 70%;\r\n    height: 40px;\r\n  }\r\n\r\n  .product-price {\r\n    margin-top: 5%;\r\n    width: 275px;\r\n    height: 70px;\r\n    background-image: url(\"@/assets/img/product/back.svg\");\r\n    background-size: cover;\r\n    background-position: center;\r\n    background-repeat: no-repeat;\r\n    display: flex;\r\n    justify-content: center; /* горизонтальное выравнивание */\r\n    align-items: center; /* вертикальное выравнивание */\r\n    text-align: center;\r\n    color: white;\r\n    font-family: medium;\r\n  }\r\n\r\n  .add-to-cart-container {\r\n    display: flex;\r\n    margin-top: 10%;\r\n    justify-content: space-between;\r\n  }\r\n\r\n  .add-to-cart-button {\r\n    width: 300px;\r\n    background-color: white;\r\n    border: none;\r\n    border-radius: 10px;\r\n    box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);\r\n  }\r\n\r\n  .quantity-counter {\r\n    display: flex;\r\n    align-items: center;\r\n    width: 30%;\r\n  }\r\n\r\n  .decrement-button,\r\n  .increment-button {\r\n    background-color: white;\r\n    border: none;\r\n    padding: 5px;\r\n  }\r\n\r\n  .quantity-counter span {\r\n    margin: 0 10px;\r\n    font-size: 16px;\r\n    color: #00A860;\r\n  }\r\n\r\n  .product_info {\r\n    margin-top: 10%;\r\n  }\r\n\r\n  .product_info h1 {\r\n    color: #10BB87;\r\n    font-family: medium;\r\n    font-size: 1.5rem;\r\n    margin-bottom: 5%;\r\n  }\r\n\r\n  .product_info p {\r\n    font-family: regular;\r\n    font-size: 0.875rem;\r\n  }\r\n</style>\r\n","import { render } from \"./ProductPage.vue?vue&type=template&id=72a072a3&scoped=true\"\nimport script from \"./ProductPage.vue?vue&type=script&lang=js\"\nexport * from \"./ProductPage.vue?vue&type=script&lang=js\"\n\nimport \"./ProductPage.vue?vue&type=style&index=0&id=72a072a3&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-72a072a3\"]])\n\nexport default __exports__"],"names":["class","key","id","_createElementBlock","_Fragment","_createElementVNode","_hoisted_1","_hoisted_2","_createVNode","_component_router_link","to","default","_withCtx","_cache","_createTextVNode","_","$data","product","_hoisted_3","_hoisted_4","_hoisted_5","src","selectedColorImage","alt","name","_hoisted_6","_hoisted_7","_toDisplayString","_hoisted_8","_hoisted_9","article","stock","_hoisted_10","_hoisted_11","onChange","$event","$options","updateColorImage","target","value","_renderList","product_colors","color","_hoisted_12","_hoisted_13","price","_hoisted_14","onClick","args","addToCart","_hoisted_15","selectedQuantity","Math","max","_imports_0","_imports_1","_hoisted_16","description","_hoisted_17","props","data","methods","loadProduct","error","supabase","from","select","eq","this","single","console","length","image_url","err","selectedColor","selectedColorData","find","log","created","watch","__exports__","render"],"sourceRoot":""}