"use strict";(self["webpackChunkreklamepub"]=self["webpackChunkreklamepub"]||[]).push([[507],{6507:function(e,t,r){r.r(t),r.d(t,{default:function(){return E}});var o=r(6768),c=r(4232);const a={class:"wrapper"},s={class:"categories"},n={class:"category"},l={id:"catalog-container",class:"catalog_container"},i={key:0,class:"error"};function d(e,t,r,d,u,g){const p=(0,o.g2)("Category"),m=(0,o.g2)("ProductCard");return(0,o.uX)(),(0,o.CE)(o.FK,null,[t[1]||(t[1]=(0,o.Lk)("section",{class:"info"},null,-1)),t[2]||(t[2]=(0,o.Lk)("section",{class:"wrapper"},[(0,o.Lk)("div",{class:"cat"},[(0,o.Lk)("h1",null,[(0,o.Lk)("span",null,"Каталог")]),(0,o.Lk)("p",null," Следует отметить, что разбавленное изрядной долей эмпатии, рациональное мышление требует определения и уточнения прогресса профессионального сообщества. Но глубокий уровень погружения влечет за собой процесс внедрения и модернизации глубокомысленных рассуждений. ")])],-1)),(0,o.Lk)("section",a,[(0,o.Lk)("div",s,[t[0]||(t[0]=(0,o.Lk)("h2",null,"Категории",-1)),(0,o.Lk)("div",n,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(u.categories,((e,t)=>((0,o.uX)(),(0,o.Wv)(p,{key:t,name:e.name,image:e.image,categoryKey:t,onCategorySelected:g.loadProducts},null,8,["name","image","categoryKey","onCategorySelected"])))),128))])]),(0,o.Lk)("div",l,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(u.displayedProducts,(e=>((0,o.uX)(),(0,o.Wv)(m,{key:e.id,product:e,category:u.selectedCategory,productId:e.id,onClick:t=>g.viewProduct(e.id)},null,8,["product","category","productId","onClick"])))),128))]),u.error?((0,o.uX)(),(0,o.CE)("div",i,(0,c.v_)(u.error),1)):(0,o.Q3)("",!0)])],64)}r(4114);const u={class:"product-card"},g=["src","alt"],p={class:"product-title"},m={class:"product-price"};function y(e,t,r,a,s,n){return(0,o.uX)(),(0,o.CE)("section",u,[(0,o.Lk)("img",{src:r.product.image_url,alt:r.product.title,class:"product-image",loading:"lazy"},null,8,g),(0,o.Lk)("h3",p,(0,c.v_)(r.product.title),1),(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>n.viewProduct&&n.viewProduct(...e)),class:"product-button"},"Выбрать вид"),(0,o.Lk)("p",m,(0,c.v_)(r.product.price)+" ₽",1)])}var k={props:{product:Object},methods:{viewProduct(){console.log(`Просмотр продукта: ${this.product.title}`)}}},v=r(1241);const h=(0,v.A)(k,[["render",y],["__scopeId","data-v-b26007b4"]]);var C=h,f=r(5130);const P=["data-category"],_=["src","alt"];function L(e,t,r,a,s,n){return(0,o.uX)(),(0,o.CE)("div",{class:"category_1",onClick:t[0]||(t[0]=(0,f.D$)(((...e)=>n.selectCategory&&n.selectCategory(...e)),["prevent"])),"data-category":r.categoryKey},[(0,o.Lk)("img",{src:r.image,alt:r.name},null,8,_),(0,o.Lk)("p",null,(0,c.v_)(r.name),1)],8,P)}var b={name:"CategoryPage",props:{name:String,image:String,categoryKey:String},methods:{selectCategory(){this.$emit("categorySelected",this.categoryKey)}}};const w=(0,v.A)(b,[["render",L]]);var S=w,I=r(4592),K={name:"CatalogPage",components:{ProductCard:C,Category:S},data(){return{categories:{mugs:{name:"Кружки",image:r(9289)},thermoses:{name:"Термосы",image:r(6100)},accessories:{name:"Аксессуары",image:r(4965)},chancellery:{name:"Канцелярия",image:r(449)}},displayedProducts:[],selectedCategory:"mugs",error:null}},methods:{async loadProducts(e){this.selectedCategory=e,this.error=null;const t=localStorage.getItem(`products_${e}`);if(t)return this.displayedProducts=JSON.parse(t),void console.log("Данные загружены из кэша");try{const{data:t,error:r}=await I.A.from("catalog_products").select("*").eq("category",e);if(r)throw r;this.displayedProducts=t,localStorage.setItem(`products_${e}`,JSON.stringify(t)),console.log("Данные загружены с сервера и сохранены в кэш")}catch(r){this.error="Ошибка при загрузке товаров: "+r.message,console.error(this.error)}},viewProduct(e){const t=this.selectedCategory;this.$router.push({name:"ProductPage",params:{category:t,id:e}})}},created(){this.loadProducts(this.selectedCategory)}};const X=(0,v.A)(K,[["render",d],["__scopeId","data-v-1844bc56"]]);var E=X},4965:function(e,t,r){e.exports=r.p+"img/icon_aksesyar.b2b1e1d0.svg"},449:function(e,t,r){e.exports=r.p+"img/icon_kanc.a226ec19.svg"},9289:function(e,t,r){e.exports=r.p+"img/icon_krysh.2f5d9576.svg"},6100:function(e,t,r){e.exports=r.p+"img/icon_termos.e90f3924.svg"}}]);
//# sourceMappingURL=507.712fc7c5.js.map